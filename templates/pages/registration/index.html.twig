{% extends 'base.html.twig' %}

{% block title %}Inscription | Elysium{% endblock %}

{% block body %}
    {% for message in app.flashes('success') %}
        <div class="mb-6 bg-emerald-50 border border-emerald-200 text-emerald-800 px-4 py-3 rounded-lg text-sm">
            {{ message }}
        </div>
    {% endfor %}
    <div class="min-h-screen flex items-center justify-center px-4 bg-[#F5F1E8]">
        <div class="w-full max-w-md bg-white/90 backdrop-blur rounded-2xl shadow-2xl p-8 border border-[#E0D4BF]">
            <h1 class="text-3xl text-center font-semibold text-[#0C325C] mb-2">
                Rejoindre Elysium
            </h1>
            <p class="text-center text-sm text-[#7A6B56] mb-8">
                Créez votre compte pour réserver l'exception
            </p>

            {% for message in app.flashes('error') %}
                <div
                    class="mb-6 bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded-lg text-sm"
                >
                    {{ message }}
                </div>
            {% endfor %}


            {{ form_start(registrationForm, {
                attr: {
                    'data-controller': 'register',
                    'data-action': 'input->register#toggle change->register#toggle'
                }
            }) }}

            {{ form_row(registrationForm.firstName, {
                row_attr: { class: 'mb-6' },
                label: 'Prénom',
                label_attr: { class: 'block text-sm font-medium text-[#4B5563] mb-1' },
                attr: {
                    'data-register-target': 'input',
                    class: 'w-full rounded-lg bg-white border border-[#D1D5DB] px-4 py-2.5 text-[#111827] placeholder-[#9CA3AF] focus:outline-none focus:ring-2 focus:ring-[#C59A3A] focus:border-transparent transition'
                }
            }) }}

            {{ form_row(registrationForm.lastName, {
                row_attr: { class: 'mb-6' },
                label: 'Nom',
                label_attr: { class: 'block text-sm font-medium text-[#4B5563] mb-1' },
                attr: {
                    'data-register-target': 'input',
                    class: 'w-full rounded-lg bg-white border border-[#D1D5DB] px-4 py-2.5 text-[#111827] placeholder-[#9CA3AF] focus:outline-none focus:ring-2 focus:ring-[#C59A3A] focus:border-transparent transition'
                }
            }) }}

            {{ form_row(registrationForm.email, {
                row_attr: { class: 'mb-6' },
                label: 'Email',
                label_attr: { class: 'block text-sm font-medium text-[#4B5563] mb-1' },
                attr: {
                    'data-register-target': 'input',
                    class: 'w-full rounded-lg bg-white border border-[#D1D5DB] px-4 py-2.5 text-[#111827] placeholder-[#9CA3AF] focus:outline-none focus:ring-2 focus:ring-[#C59A3A] focus:border-transparent transition'
                }
            }) }}

            {{ form_row(registrationForm.birthdate, {
                row_attr: { class: 'mb-6' },
                label: 'Date de naissance',
                label_attr: { class: 'block text-sm font-medium text-[#4B5563] mb-1' },
                widget: 'single_text',
                attr: {
                    'data-register-target': 'input',
                    class: 'w-full rounded-lg bg-white border border-[#D1D5DB] px-4 py-2.5 text-[#111827] focus:outline-none focus:ring-2 focus:ring-[#C59A3A] focus:border-transparent transition'
                }
            }) }}

            {{ form_row(registrationForm.plainPassword, {
                row_attr: { class: 'mb-6' },
                label: 'Mot de passe',
                label_attr: { class: 'block text-sm font-medium text-[#4B5563] mb-1' },
                attr: {
                    'data-register-target': 'input',
                    class: 'w-full rounded-lg bg-white border border-[#D1D5DB] px-4 py-2.5 text-[#111827] placeholder-[#9CA3AF] focus:outline-none focus:ring-2 focus:ring-[#C59A3A] focus:border-transparent transition'
                }
            }) }}

            {{ form_row(registrationForm.agreeTerms, {
                row_attr: { class: 'flex items-center gap-2 text-sm text-[#4B5563] mb-6' },
                label: 'J’accepte les conditions générales',
                label_attr: { class: 'text-sm text-[#4B5563]' },
                attr: {
                    'data-register-target': 'checkbox',
                    class: 'h-4 w-4 rounded border-[#D1D5DB] text-[#0C325C] focus:ring-[#C59A3A]'
                }
            }) }}

            <button
                id="submit-btn"
                type="submit"
                disabled
                data-register-target="submit"
                class="w-full rounded-lg bg-[#0C325C] hover:bg-[#134072] text-white font-medium py-3 transition shadow-lg shadow-[#0C325C]/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"
            >
                <span id="spinner"
                      class="hidden h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                <span class="ml-2">Créer mon compte</span>
            </button>

            <div class="mt-8 text-center text-xs text-[#9CA3AF]">
                © {{ "now"|date("Y") }} Elysium — Concerts & Spectacles
            </div>
            {{ form_end(registrationForm) }}

        </div>
    </div>
{% endblock %}

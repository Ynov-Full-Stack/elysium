{# templates/dashboard/index.html.twig #}
{% extends 'pages/user/_layout.html.twig' %}

{% block title %}Tableau de bord - Elysium{% endblock %}

{% block user_content %}
    <div class="space-y-12">
        <header class="flex items-center justify-between">
            <div>
                <h1 class="text-4xl lg:text-5xl font-black bg-gradient-to-r from-[#163260] to-[#1e4178] bg-clip-text text-transparent mb-2">
                    Vue d'ensemble
                </h1>
                <p class="text-[#163260]/60 text-lg">Bienvenue sur votre tableau de bord Elysium</p>
            </div>
        </header>

        <!-- Stats cards -->
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="group bg-white/70 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-[#C29757]/20 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-[#C29757] to-[#d4a562] rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/>
                        </svg>
                    </div>
                    <div class="text-[#C29757] text-sm font-semibold px-3 py-1 bg-[#C29757]/10 rounded-full">+12%</div>
                </div>
                <h3 class="text-3xl font-black text-[#163260] mb-1">{{ stats.upcoming }}</h3>
                <p class="text-[#163260]/60 font-semibold">Réservations à venir</p>
            </div>

            <div class="group bg-white/70 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-[#C29757]/20 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-[#163260] to-[#1e4178] rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                        </svg>
                    </div>
                </div>
                <h3 class="text-3xl font-black text-[#163260] mb-1">{{ stats.past }}</h3>
                <p class="text-[#163260]/60 font-semibold">Événements passés</p>
            </div>

            <div class="group bg-white/70 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-[#C29757]/20 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-[#C29757] to-[#d4a562] rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                </div>
                <h3 class="text-3xl font-black text-[#163260] mb-1">{{ stats.total_spent }}€</h3>
                <p class="text-[#163260]/60 font-semibold">Dépenses totales</p>
            </div>

            <div class="group bg-white/70 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-[#C29757]/20 hover:shadow-2xl hover:-translate-y-2 transition-all duration-500">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-[#163260] to-[#1e4178] rounded-2xl flex items-center justify-center shadow-lg">
                        <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg>
                    </div>
                </div>
                <h3 class="text-3xl font-black text-[#163260] mb-1">{{ stats.points }}</h3>
                <p class="text-[#163260]/60 font-semibold">Points fidélité</p>
            </div>
        </div>

        <!-- Prochains événements -->
        <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-[#C29757]/20">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-black text-[#163260]">Mes prochains événements</h2>
                <a href="{{ path('app_user_reservations') }}" class="text-[#C29757] font-semibold hover:underline">Voir tout</a>
            </div>

            <div class="space-y-4">
                {% for reservation in upcoming_reservations %}
                    <div class="group flex items-center gap-6 p-6 bg-[#FDFAF5] rounded-2xl border border-[#C29757]/10 hover:shadow-lg transition-all duration-300">
                        <div class="w-20 h-20 rounded-xl overflow-hidden flex-shrink-0">
                            <img src="https://picsum.photos/200/200?{{ reservation.event.type|lower }}" alt="{{ reservation.event.nom }}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <span class="inline-block text-xs font-semibold text-[#C29757] bg-[#C29757]/10 px-3 py-1 rounded-full mb-2">{{ reservation.event.type }}</span>
                            <h3 class="text-lg font-bold text-[#163260] mb-1">{{ reservation.event.nom }}</h3>
                            <p class="text-sm text-[#163260]/60">{{ reservation.event.date|date('d F Y') }} • {{ reservation.event.lieu }}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-2xl font-black text-[#163260]">{{ reservation.event.prix }}€</p>
                            <p class="text-sm text-[#163260]/60">{{ reservation.nombrePlaces }} place{{ reservation.nombrePlaces > 1 ? 's' : '' }}</p>
                        </div>
                    </div>
                {% else %}
                    <p class="text-center text-[#163260]/60 py-8">Aucune réservation à venir</p>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
